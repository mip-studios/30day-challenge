<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>30 Days Workout Challenge</title>
  
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="30 Days">
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAf5JREFUaEPtmO1RAzEMhGMXYBTgKOAowCnAKMAowCnAKMAowCiAAuL5JHvptD5I0qT0Sb5kS2p/d/b3fQBeALsAewB7gB3ACeAB8AY4AzwDngAssAecAS7AExiB/xN4AuwD7AGeATOAPcAG8AR4ArQAfh8ALgeQ1wHkegA5fQE8fQEkfQEsfQFYfQFYfQHkegA5XQEEfQEEfQGcfQFcfQEkfQEkfQGcfQHkegA5nQEEfQFEfQFEfQHcfQFkfQEkfQHcfQGkegA5/QE8fQEkfQFcfQHEegA5vQGcfQHEegA5vQGcfQHEegA5XQEEfQFEfQGEegA5vQGcfQHEegA5vQGEegA5vQGcfQHEegA5XQEEfQFEfQGEegA5vQGcfQHEegA5vQGkegA5/QFkfQGcfQHEegA5/QGcfQHEegA5/QGcfQHEegA5vQGEegA5vQGcfQHEegA5vQGEegA5vQGcfQHEegA5XQEEfQFEfQGkegA5vQGcfQHEegA5XQGkfQEkfQHkegA5/QGcfQFkfQGcfQHEegA5vQGcfQGkfQGEegA5vQGkfQEkfQHkegA5vQGcfQHEegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QGkegA5/QFk/gD+8Y+4A4kX/zG/3wA2gBfAG+AC8AX4A/yr/A+MAFYAzwBngBvAF+AN8AY4A3wBngCfgT/K5wDYP8wD4A3wBjgD/Gv8DwACWAKbAQ4A5wBngDPAucAd4A5wB3gB3gDvgD/An+F/iP88a8A0wB3gD3AHOAO8AewB7gB3gDnAHeAPcAY7APgDJL/8B63AZz2VsjBwAAAAASUVORK5CYII=">

  <style>
    :root {
      --bg-color: #f2f2f2;
      --text-color: #333;
      --card-bg-color: white;
      --card-shadow: 0 2px 5px rgba(0,0,0,0.1);
      --completed-bg-color: #d4edda;
      --completed-day-color: #28a745;
      --button-primary-bg: #007bff;
      --button-primary-hover-bg: #0056b3;
      --button-secondary-bg: #fff799;
      --button-secondary-hover-bg: #ffef66;
      --button-tertiary-bg: #6c757d;
      --button-tertiary-hover-bg: #5a6268;
      --button-danger-bg: #dc3545;
      --button-danger-hover-bg: #c82333;
      --compliment-color: #2c662d;
      --progress-bar-bg: #e9ecef;
      --progress-bar-fill: #007bff;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #121212;
        --text-color: #e0e0e0;
        --card-bg-color: #1e1e1e;
        --card-shadow: 0 2px 8px rgba(0,0,0,0.4);
        --completed-bg-color: #2a3d30;
        --completed-day-color: #3b8e4e;
        --button-primary-bg: #0059b3;
        --button-primary-hover-bg: #00448a;
        --button-secondary-bg: #5a5229;
        --button-secondary-hover-bg: #706735;
        --button-tertiary-bg: #4f565c;
        --button-tertiary-hover-bg: #3a4045;
        --button-danger-bg: #c82333;
        --button-danger-hover-bg: #a71d2a;
        --compliment-color: #81c784;
        --progress-bar-bg: #333;
        --progress-bar-fill: #0059b3;
      }
    }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-color); color: var(--text-color); padding: 10px; margin: 0; transition: background-color 0.3s, color 0.3s; }
    h1 { text-align: center; font-size: 1.6em; margin: 5px 0 5px; }
    h2.welcome-message { text-align: center; font-size: 1.2em; font-weight: normal; margin: 0 0 20px; }
    #progress-container { width: 90%; max-width: 600px; margin: 15px auto 5px; background-color: var(--progress-bar-bg); border-radius: 10px; overflow: hidden; height: 20px; }
    #progress-bar { width: 0%; height: 100%; background-color: var(--progress-bar-fill); transition: width 0.5s ease-in-out; }
    #progress-text { text-align: center; font-weight: bold; margin-bottom: 20px; display: block; }
    footer { text-align: center; margin: 30px 0 20px; font-size: 0.8em; color: var(--text-color); opacity: 0.6; }

    /* Statische content styling */
    .intro-text { text-align: center; font-size: 0.95em; max-width: 600px; margin: 0 auto 20px; color: var(--text-color); opacity: 0.8; }
    .warning { text-align: center; font-size: 0.95em; color: #b33; margin-bottom: 5px; font-style: italic; }
    .video-section, .feedback-section { background: var(--card-bg-color); border-radius: 12px; padding: 20px; margin: 20px auto; box-shadow: var(--card-shadow); max-width: 600px; text-align: center; }
    .button-group { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 15px; }
    .styled-button { display: inline-block; color: white; text-decoration: none; padding: 10px 18px; border-radius: 8px; font-weight: bold; transition: background-color 0.2s; border: none; font-size: 1em; cursor: pointer; }
    .video-button { background-color: var(--button-primary-bg); }
    .video-button:hover { background-color: var(--button-primary-hover-bg); }
    .feedback-button { background-color: var(--button-primary-bg); }
    .feedback-button:hover { background-color: var(--button-primary-hover-bg); }
    .reset-button { background-color: var(--button-danger-bg); }
    .reset-button:hover { background-color: var(--button-danger-hover-bg); }

    /* Kalender Styling */
    #calendar-view { display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 10px; padding: 10px; max-width: 500px; margin: 20px auto; }
    .calendar-day { display: flex; justify-content: center; align-items: center; background: var(--card-bg-color); color: var(--text-color); text-decoration: none; font-weight: bold; font-size: 1.5em; height: 60px; border-radius: 10px; box-shadow: var(--card-shadow); transition: transform 0.2s, background-color 0.2s; }
    .calendar-day:hover { transform: scale(1.05); }
    .calendar-day.completed { background-color: var(--completed-day-color); color: white; }
    .calendar-day.rest-day { font-style: italic; opacity: 0.7; }
    
    /* Detail Pagina Styling */
    .day-detail-card { background: var(--card-bg-color); border-radius: 12px; padding: 15px 20px; margin: 10px auto; box-shadow: var(--card-shadow); max-width: 600px; }
    .day-detail-card.completed { background-color: var(--completed-bg-color); }
    .day-content { line-height: 1.6; }
    .day-content > strong { font-size: 1.1em; }
    .compliment { margin-top: 15px; padding-top: 10px; border-top: 1px solid rgba(128,128,128,0.2); font-style: italic; color: var(--compliment-color); text-align: center; }
    .timer { display: inline-block; margin-left: 10px; font-weight: bold; }
    .timer-button { background-color: var(--button-primary-bg); color: white; padding: 8px 14px; font-size: 0.9em; border-radius: 6px; cursor: pointer; margin-left: 5px; border: none; }
    
    .back-button { display: block; max-width: 600px; margin: 20px auto 10px; text-align: center; color: var(--text-color); text-decoration: none; font-weight: bold; padding: 10px; background: var(--card-bg-color); border-radius: 8px; box-shadow: var(--card-shadow); }

    .action-button { display: block; width: 100%; margin-top: 12px; padding: 12px 16px; font-size: 1em; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; text-align: center; transition: background-color 0.2s ease, transform 0.1s ease; }
    .wake-button-top { background-color: var(--button-secondary-bg); color: var(--text-color); }
    .complete-button { background-color: var(--button-tertiary-bg); color: white; }
    .complete-button.done { background-color: #28a745; }
  </style>
</head>
<body>
  <h1>30 Days Workout Challenge</h1>
  <h2 class="welcome-message" id="welcome-message"></h2>
  <div id="progress-container"><div id="progress-bar"></div></div>
  <div id="progress-text">0% voltooid</div>

  <main id="app-container">
      <div id="main-view-content">
          <div class="warning">‚ö†Ô∏è Dit is een testsite ‚Äì niet bedoeld om serieus thuis te doen of als medisch advies.</div>
          <p class="intro-text">Deze site komt het best tot zijn recht op een iPhone.<br>Gebruik de knop ‚ÄúStart workout modus‚Äù om je scherm wakker te houden tijdens het sporten.</p>
          <div class="video-section">
              <p>Je weet het vast wel, maar mocht je je techniek toch nog verder willen verbeteren, hierbij een voorbeeld hoe je dat kunt doen üòâ</p>
              <div class="button-group">
                  <a href="https://m.youtube.com/watch?v=pSHjTRCQxIw" target="_blank" class="styled-button video-button">Planken</a>
                  <a href="https://youtu.be/Xyd_fa5zoEU?feature=shared" target="_blank" class="styled-button video-button">Crunches</a>
                  <a href="https://youtu.be/JB2oyawG9KI?feature=shared" target="_blank" class="styled-button video-button">Leg Raises</a>
                  <a href="https://youtu.be/UXJrBgI2RxA?feature=shared" target="_blank" class="styled-button video-button">Squats</a>
              </div>
          </div>
          <div id="calendar-view"></div>
          <div class="feedback-section">
              <p>Heb je een briljant idee of wil je opnieuw beginnen?</p>
              <div class="button-group">
                <a href="mailto:post.master@me.com?subject=Ik%20heb%20je%2030%20dagen%20challenge%20overleefd%20en...%20%F0%9F%92%AA" class="styled-button feedback-button">Geef Feedback</a>
                <button id="reset-btn" class="styled-button reset-button">Reset Alles</button>
              </div>
          </div>
      </div>
      
      <div id="detail-view" style="display: none;"></div>
  </main>
  
  <footer>Mip Studio‚Äôs ‚Ä¢ 2025</footer>

  <audio id="beep-sound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>

  <script>
    const workoutCompliments = [ "Dag 1 is binnen, {{name}}! De belangrijkste stap is gezet. Klasse!", "Kijk jou gaan! Die inzet is nu al bewonderenswaardig.", "Wow, nu al? Jij bent een machine! üî•", "Perfecte uitvoering, {{name}}. Je techniek wordt met de dag beter.", "Ga zo door! De resultaten zullen volgen, dat kan niet anders.", "Je bent sterker dan je denkt. Deze workout was het bewijs.", "Spieren van staal in de maak. üí™", "Je hebt dit. Elke herhaling telt, en jij maakt ze af!", "Zelfs je spiegel is onder de indruk. üòé", "Wat een doorzettingsvermogen, {{name}}! Echt top.", "Challenge? Welke challenge? Jij laat dit er makkelijk uitzien.", "Je bent al bijna op de helft! Ongelofelijk hoe snel dat gaat.", "Die energie! Kunnen we die op fles verkopen?", "Elke dag een beetje sterker. Voel je het al, {{name}}?", "Jouw motivatie is aanstekelijk. Ga zo door!", "Dit is hoe kampioenen trainen. Serieus.", "Je bent een inspiratie! Echt waar.", "Die laatste paar reps waren voor het karakter. En dat heb je, {{name}}!", "Je hebt de 'ik kan dit niet' fase officieel verlaten. Welkom bij de 'kijk mij eens' club.", "Nog maar een paar dagen te gaan! De finish is in zicht.", "Je hebt meer discipline dan de meeste mensen. Petje af!", "Fenomenaal werk, {{name}}! Bijna aan het einde van deze reis.", "Je lichaam zal je dankbaar zijn voor deze geweldige inzet.", "Morgen de allerlaatste workout! Maak je borst maar nat.", "De allerlaatste workout. Wat een reis, {{name}}. Maak het onvergetelijk!" ];
    const restDayCompliments = [ "Rust is net zo belangrijk als de training, {{name}}. Je lichaam bouwt nu spieren op. Goed bezig!", "Een rustdag is een slimme zet. Morgen kom je sterker terug!", "Vandaag even opladen. Je hebt het verdiend, {{name}}!", "Discipline is ook weten wanneer je moet rusten. Perfecte timing.", "Geniet van deze pauze. Je consistentie tot nu toe is indrukwekkend!" ];
    const days = [...Array(30)].map((_, i) => { const d = i + 1; const restDaysBefore = [5, 10, 15, 20, 25].filter(v => d > v).length; if ([5, 10, 15, 20, 25].includes(d)) { const restDayIndex = [5, 10, 15, 20, 25].indexOf(d); return { dag: d, rust: true, complimentIndex: restDayIndex }; } const workoutIndex = i - restDaysBefore; const plank = [20,30,30,35,40,45,45,50,60,60,70,80,80,90,90,105,105,105,120,120,135,135,150,165,180][workoutIndex]; const crunches = [15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100,105,110,115,120,125,130,135][workoutIndex]; const legRaises = [5,8,10,12,15,20,30,30,33,40,42,42,42,45,48,50,52,55,58,60,60,62,62,62,65][workoutIndex]; const squats = [30,30,35,40,45,50,50,55,55,55,60,60,65,65,70,70,75,75,75,80,80,80,85,85,90][workoutIndex]; return { dag: d, plank, crunches, legRaises, squats, rust: false, complimentIndex: workoutIndex }; });
    
    const wakeLocks = {};
    const timers = {};

    const mainViewContent = document.getElementById('main-view-content');
    const calendarView = document.getElementById('calendar-view');
    const detailView = document.getElementById('detail-view');

    function renderCalendar() {
        calendarView.innerHTML = ''; 
        for (const dayData of days) {
            const dayLink = document.createElement('a');
            dayLink.href = `#day-${dayData.dag}`;
            dayLink.className = 'calendar-day';
            dayLink.textContent = dayData.dag;

            if (localStorage.getItem('dag' + dayData.dag) === 'true') {
                dayLink.classList.add('completed');
            }
            if (dayData.rust) {
                dayLink.classList.add('rest-day');
            }
            calendarView.appendChild(dayLink);
        }
    }

    function renderDetailView(dayNumber) {
        const dayData = days[dayNumber - 1];
        if (!dayData) {
            location.hash = ''; 
            return;
        }

        detailView.innerHTML = ''; 
        
        const backButton = document.createElement('a');
        backButton.href = '#';
        backButton.className = 'back-button';
        backButton.innerHTML = '&larr; Terug naar overzicht';
        detailView.appendChild(backButton);

        const div = document.createElement('div');
        div.className = 'day-detail-card';
        div.id = 'dag-' + dayData.dag;
        const isCompleted = localStorage.getItem('dag' + dayData.dag) === 'true';

        let contentHTML = `<div class="day-content"><strong>Dag ${dayData.dag}</strong>`;
        if (dayData.rust) {
            contentHTML += `<br>Rustdag üßò‚Äç‚ôÄÔ∏è`;
        } else {
            contentHTML += `<button id="wakeBtn-${dayData.dag}" class="action-button wake-button-top">Start workout modus</button>`;
            if (dayData.plank) {
                const timerId = `timer-${dayData.dag}`;
                contentHTML += `${dayData.plank}s planken <button class="timer-button" onclick="startPlank(${dayData.dag}, ${dayData.plank}, '${timerId}')">Start timer</button> <span class="timer" id="${timerId}"></span><br>`;
            }
            contentHTML += `${dayData.crunches} crunches<br>`;
            contentHTML += `${dayData.legRaises} leg raises<br>`;
            contentHTML += `${dayData.squats} squats<br>`;
        }
        contentHTML += `</div>`;
        div.innerHTML = contentHTML;

        if (!dayData.rust) {
            const wakeBtn = div.querySelector(`#wakeBtn-${dayData.dag}`);
            if(wakeBtn) {
                wakeBtn.onclick = () => toggleWakeLock(dayData.dag, wakeBtn);
            }
        }

        const complimentDiv = document.createElement('div');
        complimentDiv.className = 'compliment';
        const completeBtn = document.createElement('button');
        completeBtn.className = 'action-button complete-button';

        const updateButtonState = (completed) => {
            const userName = localStorage.getItem('userName') || 'Kanjer';
            let complimentText = '';
            if (completed) {
                div.classList.add('completed');
                completeBtn.classList.add('done');
                completeBtn.textContent = '‚úÖ Voltooid!';
                if (dayData.dag === 30) {
                    complimentDiv.innerHTML = `<strong>CHALLENGE VOLTOOID!</strong><br> Wat een absolute eindbaas! 30 dagen lang discipline en zweet. Je hebt het gehaald, ${userName}. Wees supertrots op jezelf, rust goed uit, je hebt het verdiend!`;
                } else {
                    complimentText = dayData.rust ? restDayCompliments[dayData.complimentIndex] : workoutCompliments[dayData.complimentIndex];
                    complimentDiv.innerHTML = complimentText.replace(/{{name}}/g, userName);
                }
                complimentDiv.style.display = 'block';
            } else {
                div.classList.remove('completed');
                completeBtn.classList.remove('done');
                completeBtn.textContent = dayData.rust ? 'Rustdag voltooid' : 'Markeer als voltooid';
                complimentDiv.innerHTML = '';
                complimentDiv.style.display = 'none';
            }
        };

        completeBtn.onclick = async () => {
            const currentState = localStorage.getItem('dag' + dayData.dag) === 'true';
            const newState = !currentState;
            localStorage.setItem('dag' + dayData.dag, newState);
            updateButtonState(newState);
            updateProgress();
            if (newState && wakeLocks[dayData.dag]) {
                await wakeLocks[dayData.dag].release();
            }
        };

        div.appendChild(completeBtn);
        div.appendChild(complimentDiv);
        updateButtonState(isCompleted);
        detailView.appendChild(div);
    }

    function router() {
        const hash = location.hash;
        if (hash.startsWith('#day-')) {
            const dayNumber = parseInt(hash.substring(5), 10);
            mainViewContent.style.display = 'none'; // Verberg de hoofdpagina content
            detailView.style.display = 'block';
            renderDetailView(dayNumber);
        } else {
            mainViewContent.style.display = 'block'; // Toon de hoofdpagina content
            detailView.style.display = 'none';
            renderCalendar();
        }
    }
    
    function updateProgress() { let completedCount = 0; for (let i = 1; i <= 30; i++) { if (localStorage.getItem('dag' + i) === 'true') completedCount++; } const percentage = Math.round((completedCount / 30) * 100); document.getElementById('progress-bar').style.width = percentage + '%'; document.getElementById('progress-text').textContent = `${percentage}% voltooid`; }
    function handleUserName() { let userName = localStorage.getItem('userName'); if (!userName) { const introText = "Welkom bij de 30 Days Workout Challenge, goed dat je meedoet!\n\nWat is je naam?"; userName = prompt(introText, ""); if (userName && userName.toLowerCase().trim() === 'grace') { alert("Wat een mooie naam Grace, vast net zo mooi als jij ;)"); } if (userName && userName.trim() !== "") { localStorage.setItem('userName', userName); } else { userName = null; } } if (userName) { document.getElementById('welcome-message').textContent = `Zet 'm op, ${userName}!`; } }
    async function toggleWakeLock(dag, button) { if (wakeLocks[dag]) { await wakeLocks[dag].release(); wakeLocks[dag] = null; button.textContent = "Start workout modus"; button.style.backgroundColor = ''; } else { try { wakeLocks[dag] = await navigator.wakeLock.request('screen'); button.textContent = "‚úÖ Workout modus actief"; button.style.backgroundColor = '#28a745'; wakeLocks[dag].addEventListener('release', () => { wakeLocks[dag] = null; if (button) { button.textContent = "Start workout modus"; button.style.backgroundColor = ''; } }); } catch (e) { alert("Wake lock wordt niet ondersteund door deze browser of is uitgeschakeld."); } } }
    function startPlank(dag, seconden, id) { if (timers[dag] && timers[dag].interval) clearInterval(timers[dag].interval); const display = document.getElementById(id); const beep = document.getElementById("beep-sound"); let time = seconden; display.textContent = `‚è≥ ${time}s`; const interval = setInterval(() => { time--; display.textContent = `‚è≥ ${time}s`; if (time <= 0) { clearInterval(interval); display.textContent = "‚úÖ Klaar!"; beep.play(); timers[dag] = null; } }, 1000); timers[dag] = { interval }; }
    function resetAllProgress() { if (confirm("Weet je zeker dat je alle voortgang en je naam wilt wissen? Dit kan niet ongedaan worden gemaakt.")) { localStorage.clear(); location.reload(); } }
    
    // Initialiseer de app
    document.getElementById('reset-btn').addEventListener('click', resetAllProgress);
    handleUserName();
    updateProgress();
    
    window.addEventListener('hashchange', router);
    window.addEventListener('DOMContentLoaded', router);

  </script>
</body>
</html>
